需要修正当前红包生成逻辑。

当前实现方式为使用 Pillow 动态绘制红包 UI，这种方式无法满足设计稿要求，现改为「素材模板合成模式」。

【素材目录结构】

红包素材已固定存放如下：

assets/redpacket/
cover/
C01.jpg        ← 红包封面模板（可变）
body/
B01.png        ← 红包袋身素材（固定）

【素材规格】

封面图（cover）：

* 格式：PNG / JPG / JPEG
* 尺寸：957 × 1278

红包袋身（body）：

* 格式：PNG（必须带透明通道）
* 尺寸：957 × 480

最终生成红包：

* 尺寸固定为：957 × 1584

【重要结构说明】

最终红包图不是简单拼接：

957 × 1584 ≠ 1278 + 480

红包袋身需要覆盖封面底部一部分，形成“封面插入袋身”的视觉结构。

袋身粘贴位置计算方式为：

BODY_Y = FINAL_HEIGHT - BODY_HEIGHT
= 1584 - 480
= 1104

也就是说：
袋身应从 y=1104 开始覆盖封面

封面底部约 174px 将被袋身遮挡（设计安全区）

【实现要求】

重写红包生成逻辑为：

1. 创建最终画布：
   957 × 1584 RGBA

2. 读取封面图：
   assets/redpacket/cover/{cover_name}

3. 读取袋身素材：
   assets/redpacket/body/{body_name}

4. Resize：
   cover → 957 × 1278
   body  → 957 × 480

5. 图层顺序：

   * 先 paste 封面到 (0, 0)
   * 再 paste 袋身到 (0, 1104)

6. 粘贴袋身时必须使用透明mask：

   final.paste(body, (0, 1104), body)

否则 PNG 透明区域会变黑

7. 最终导出：
   RGB JPEG 或 PNG

【禁止事项】

禁止：

* 使用 ImageDraw 绘制红包UI
* 动态画封口
* 动态画按钮
* 动态绘制金额区域
* 动态绘制圆形封签

红包视觉完全依赖模板素材合成

【函数要求】

新增服务函数：

compose_redpacket(
cover_name: str,
body_name: str
) -> str

cover_name 对应：
assets/redpacket/cover/

body_name 对应：
assets/redpacket/body/

返回最终生成红包路径

需要进一步修正红包封面处理逻辑。

当前实现为：

cover.resize((957, 1278))

这是错误的实现方式，会导致：

* 人物变形
* LOGO拉伸
* 标题比例失真

封面必须使用「等比缩放 + 底部裁剪」策略，而不是强制 resize。

【封面处理规则】

封面素材尺寸不固定，宽高比可能不同。

正确处理流程为：

1. 读取原始封面图（cover）

2. 先按「宽度」等比缩放：

   scale = 957 / cover.width

   new_height = int(cover.height * scale)

   cover = cover.resize(
   (957, new_height),
   Image.Resampling.LANCZOS
   )

3. 如果 new_height > 1278：

   需要从「底部裁剪」至 1278：

   cover = cover.crop(
   (0, 0, 957, 1278)
   )

注意：

禁止：

* 居中裁剪
* 顶部裁剪
* 强制拉伸

必须保留封面顶部内容，
仅允许裁剪底部多余部分。

原因：

红包袋身会从 y=1104 开始覆盖封面，
封面底部约174px为设计安全区，
裁剪底部不会影响视觉主体。

【红包合成最终流程】

FinalCanvas：957 × 1584

cover：
等比缩放至宽度957
底部裁剪至高度1278

body：
resize至 957 × 480

图层顺序：
paste cover → (0,0)
paste body  → (0,1104)  使用透明mask

最终导出 PNG / JPG
